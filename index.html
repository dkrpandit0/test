<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mobile Replace Drawer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    document.addEventListener('alpine:init', () => {
      Alpine.data('drawerComponent', () => ({
        showReplaceDrawer: false,
        drawerProductIndex: null,
        isAddItemsMode: false,
        replaceInput: '',

        addItemsFromDrawer() {
          alert("‚úÖ Items Added: " + this.replaceInput);
          this.replaceInput = '';
          this.showReplaceDrawer = false;
        },

        addReplacementToCart() {
          alert("üîÑ Replacement Added: " + this.replaceInput);
          this.replaceInput = '';
          this.showReplaceDrawer = false;
        },

        removeAdditionalItem() {
          alert("‚ùå Additional Item Removed");
        },

        removeReplaceItem() {
          alert("‚ùå Replacement Removed");
        }
      }))
    })
  </script>

  <style>
    .text-14to16 {
      font-size: 14px;
    }

    .text-16to20 {
      font-size: 16px;
    }

    .bg-container-dark {
      background-color: #374151;
    }

    .text-container-dark {
      color: #374151;
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-800" x-data="drawerComponent()">

  <!-- üì± Trigger Button -->
  <div class="fixed bottom-4 left-4 right-4 z-40 md:hidden">
    <button
      class="w-full py-4 text-white font-bold bg-blue-600 rounded-full shadow-md text-base"
      @click="showReplaceDrawer = true; drawerProductIndex = 0; isAddItemsMode = false"
    >
      ‚ûï Open Drawer
    </button>
  </div>

  <!-- üõç Drawer for Mobile -->
  <div
    x-show="showReplaceDrawer && (drawerProductIndex !== null || isAddItemsMode)"
    class="fixed inset-0 z-50 flex items-end justify-center bg-black/40"
    x-transition
    style="display: none;"
  >
    <div
      class="bg-white rounded-t-2xl shadow-lg w-full px-4 pt-4 pb-6 max-h-[90vh] overflow-y-auto"
      x-transition:enter="transition transform duration-300"
      x-transition:enter-start="translate-y-full opacity-0"
      x-transition:enter-end="translate-y-0 opacity-100"
      x-transition:leave="transition transform duration-200"
      x-transition:leave-start="translate-y-0 opacity-100"
      x-transition:leave-end="translate-y-full opacity-0"
    >
      <!-- Header -->
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-bold text-gray-800 text-center w-full"
          x-text="isAddItemsMode ? 'üõç Add items' : 'üîÅ Replace Item'">
        </h2>
        <button
          @click="showReplaceDrawer = false"
          class="absolute right-4 text-gray-400 hover:text-gray-600 text-xl"
        >
          ‚úï
        </button>
      </div>

      <!-- Subtext -->
      <p class="text-14to16 text-gray-500 text-center mb-4"
        x-text="isAddItemsMode ? 'Add items to your order if available' : 'This will be replaced if available'">
      </p>

      <!-- Textarea -->
      <textarea
        class="w-full border border-gray-300 rounded-lg p-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none"
        rows="5"
        placeholder="e.g., 2 - Milk Pack"
        x-model="replaceInput"
      ></textarea>

      <!-- Add Button -->
      <button
        class="w-full mt-4 py-3 rounded-full font-semibold text-white text-16to20 transition"
        :class="replaceInput.trim() ? 'bg-container-dark' : 'bg-gray-400 cursor-not-allowed'"
        :disabled="!replaceInput.trim()"
        @click="isAddItemsMode ? addItemsFromDrawer() : addReplacementToCart()"
      >
        <span x-text="isAddItemsMode ? 'Add to Cart' : 'Replace Item'"></span>
      </button>

      <!-- Remove Button (optional) -->
      <button
        x-show="replaceInput.trim().length > 0"
        x-transition
        class="w-full mt-2 py-3 rounded-full font-semibold text-container-dark border border-container-dark"
        @click="isAddItemsMode ? removeAdditionalItem() : removeReplaceItem(); replaceInput = ''; showReplaceDrawer = false"
      >
        <span x-text="isAddItemsMode ? 'Remove Item' : 'Remove Replacement'"></span>
      </button>
    </div>
  </div>
</body>
</html>
